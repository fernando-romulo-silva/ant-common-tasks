<?xml version="1.0" encoding="UTF-8"?>
<project name="maven-report-macrodef" xmlns:if="ant:if" xmlns:unless="ant:unless">

	<description>
	     Scrip ANT com configuracoes MAVEN.
    </description>


	<import file="../../confs/initial-conf.xml" />
	<import file="../../confs/maven-conf.xml" />

	<!--|###########################################################################################################################|-->
	<!--|#################################### REPORTS DESCRIPTIONS #################################################################|-->
	<!--|###########################################################################################################################|-->
	<property name="report.surefire.description" value="report-surefire : Create a report with test's results.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-surefire${line.separator}
		- Batch Mode${line.separator}
			ant report-surefire -Dbatch=true${line.separator}
			ant report-surefire -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-surefire -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<property name="report.all.description" value="report-all : Create PMD, CPD, Spotbugs, Checkstyle, and Cobertura reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-all${line.separator}
		- Batch Mode${line.separator}
			ant report-all -Dbatch=true${line.separator}
			ant report-all -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-all -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<property name="report.jacoco.description" value="report-jacoco : Create Jacoco reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-jacoco${line.separator}
		- Batch Mode${line.separator}
			ant report-jacoco -Dbatch=true${line.separator}
			ant report-jacoco -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-jacoco -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />	

	<property name="report.spotbugs.description" value="report-spotbugs : Create Spotbugs reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-spotbugs${line.separator}
		- Batch Mode${line.separator}
			ant report-spotbugs -Dbatch=true${line.separator}
			ant report-spotbugs -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-spotbugs -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<property name="report.pmd.description" value="report-pmd : Create PMD reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-pmd${line.separator}
		- Batch Mode${line.separator}
			ant report-pmd -Dbatch=true${line.separator}
			ant report-pmd -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-pmd -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<property name="report.cpd.description" value="report-cpd : Create CPD reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-cpd${line.separator}
		- Batch Mode${line.separator}
			ant report-cpd -Dbatch=true${line.separator}
			ant report-cpd -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-cpd -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<property name="report.checkstyle.description" value="report-checkstyle : Create Checkstyle reports of project.${line.separator}
		Examples :${line.separator}
		- Manual Input${line.separator}
			ant report-checkstyle${line.separator}
		- Batch Mode${line.separator}
			ant report-checkstyle -Dbatch=true${line.separator}
			ant report-checkstyle -Dbatch=true -Dprofile=dev${line.separator}
		- If there are modules:${line.separator}
		    ant report-checkstyle -Dbatch=true -Dmodules-specified={module-maven} -Dmodules-dependents={boolean} -Dmodules-dependencies={boolean}" />

	<!--|###########################################################################################################################| -->
	<!--|################################# REPORTS #################################################################################| -->
	<!--|###########################################################################################################################| -->

	<!--|##############################################################################|-->
	<!--| macrodef: report-surefire     					   				      	   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-surefire" description="${report.surefire.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s Surefire reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="surefire-report:report" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s Surefire reports successfully created." />
		</sequential>
	</macrodef>

	<!--|##############################################################################|-->
	<!--| macrodef: report-jacoco     					   				      		   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-jacoco" description="${report.jacoco.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s JaCoco reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jacoco:report" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s Surefire reports successfully created." />
		</sequential>
	</macrodef>	

	<!--|##############################################################################|-->
	<!--| macrodef: report-pmd         					   				      		   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-pmd" description="${report.pmd.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s PMD reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="pmd:pmd" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s PMD reports successfully created." />
		</sequential>
	</macrodef>

	<!--|##############################################################################|-->
	<!--| macrodef: report-cpd      					   				      		   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-cpd" description="${report.cpd.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s CPD reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="pmd:cpd" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s CPD reports successfully created." />
		</sequential>
	</macrodef>

	<!--|##############################################################################|-->
	<!--| macrodef: report-spotbugs      					   				      		   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-spotbugs" description="${report.spotbugs.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s Spotbugs reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="spotbugs:spotbugs" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s Spotbugs reports successfully created." />
		</sequential>
	</macrodef>

	<!--|##############################################################################|-->
	<!--| macrodef: report-checkstyle    					   			      		   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-checkstyle" description="${report.checkstyle.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s Checkstyle reports." />

			<!-- Gerando relatorio do Checkstyle -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="checkstyle:checkstyle" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s Spotbugs reports successfully created." />
		</sequential>
	</macrodef>

	<!--|##############################################################################|-->
	<!--| macrodef: report-all          					   				    	   |-->
	<!--|##############################################################################|-->
	<macrodef name="report-all" description="${report.all.description}">
		<attribute name="profile" default="" description="${profile.description}" />
		<attribute name="modules-specified" default="" description="${modules.specified.description}" />
		<attribute name="modules-dependencies" default="true" description="${modules.dependencies.description}" />
		<attribute name="modules-dependents" default="true" description="${modules.dependents.description}" />

		<sequential>
			<!-- Initial Message -->
			<echo message="Creating ${pom.project.artifactId}'s tools reports." />

			<!-- Execute -->
			<exec-maven profile="@{profile}" modules-specified="@{modules-specified}" modules-dependencies="@{modules-dependencies}" modules-dependents="@{modules-dependents}">
				<arg-elements>
					<arg line="jxr:jxr" />
					<arg line="jxr:test-jxr" />
					<arg line="jacoco:report" />
					<arg line="pmd:pmd" />
					<arg line="pmd:cpd" />
					<arg line="spotbugs:spotbugs" />
					<arg line="checkstyle:checkstyle" />
					<arg line="surefire-report:report-only" />
				</arg-elements>
			</exec-maven>

			<!-- Success -->
			<echo message="The ${pom.project.artifactId}'s tools reports successfully created." />
		</sequential>
	</macrodef>

</project>